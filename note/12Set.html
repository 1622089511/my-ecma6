<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
	<script type="text/javascript">
		
	/*	Set : 集合对象,成员的值都是唯一的没有重复的值,无论是原始值还是引用值
		语法	: new Set([iterable]); iterable一个可迭代对象，其中的所有元素都会被加入到 Set 中。null被视作 undefined
		属性	: constructor,size
		Api : add(value)添加值,返回set
			  delete(value)删除某些值
			  has(value)返回一个布尔值
			  clear()清除所有成员
	 	 	  	
	  
	  
	  
	 */
		const s = new Set();
		
		[2,2,3,4,5,2,2].forEach(x => s.add(x)); //Set不会添加任何重复的值  Set.add()尾部添加
		
		for(let i of s ){
			console.log(i);  //2,3,4,5
		}
		
	
	
	//example1:
		
		const set = new Set([1,2,3,4,4,2]);
		console.log(set); 			  //Set{1,2,3,4}
		console.log(Array.from(set)); //[1,2,3,4]
		
	//example2:
		
		console.log(set.size);        //4  size数值只保留有效值
		
	//example3:
	
		function divs(){
			return [...document.querySelectorAll('div')];
		}
		
		let s2 = new Set(divs());
		let ok = {ok : 'ok'};
		s2.add(ok);
		console.log(s2,s2.size);   //Set{div{}*8,ok},9
		
	//数组去重
	
		function unique(array){
		    return Array.from(new Set(array));
		}
		console.log(unique([1,2,3,2,1,3]));
	
	//Set.add() 加入值不会发生类型转换,"5"和5是两个值,NaN相等,
	
		console.log( new Set().add(5).add("5") ); //Set{5,"5"}
		console.log( new Set().add(NaN).add(NaN));//Set{NaN}  set内部NaN相等
		
	/*遍历操作keys()返回键名             
	        values()返回键值 	    
	  		entries()返回键值对的遍历器	         
	  		forEach()使用回调函数遍历每个成员                        
	  	keys方法、values方法、entries方法返回的都是遍历器对象
	*/
		for(let i of s2){
			console.log(i)              //div*8,ok
		}
		
		
		for (let i of s2.keys()){
			console.log(i);				//div*8,ok
		}
		
		for (let i of s2.values()){       
			console.log(i);				//div*8,ok 
		}
			
		//Set只有键值,所以keys方法和values方法行为完全一致		
		
		
	//	entries():entries方法返回的遍历器，同时包括键名和键值，所以每次输出一个数组，它的两个成员完全相等。

		for(let item of s2.entries()){
			console.log(item);
		}
	
		
	//	forEach(value,index)
	
		let cool = new Set([1,2,3]);
		cool.forEach((value,index)=> console.log(index*2))
	
	//	扩展运算符与set
	
		let sett = new Set(["a","b","c",10,"10",10]);
		let arrt = [...sett];
		console.log(arrt); //["a","b","c",10,"10"]
		
	//  map和fliter也可以运用与Set
	
		var _set = [...sett].map(x=>x*2);           
		var _set2 = [...sett].filter(x=> (x%2) === 0);
		console.log(_set);         //[NaN, NaN, NaN, 20, 20]
		console.log(_set2); 	   //[10, "10"]
	
	//	Set实现交集,并集和差集
	
		let set3 = new Set([1,2,3]);
		let set4 = new Set([1,5,3]);
	
		console.log(new Set([...set3,...set4]));  //并集合Set{1,2,3,5}
		
		console.log(new Set([...set3].filter(x => set4.has(x)))); //交集Set{1,3}
		
		console.log(new Set([...set3].filter(x => !set4.has(x)))); //差集Set{2} 
		
		
	</script>	
	</body>
</html>
